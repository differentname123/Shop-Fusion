<!-- pages/lottery/lottery.wxml -->
<view class="container">
  <view class="header">
    <view class="user-info">
      <text>积分：{{points}}</text>
    </view>
    <view class="menu">
      <text class="menu-item" bindtap="onShowRules">规则</text>
    </view>
  </view>

  <view class="energy-bar">
    <text class="energy-text">幸运值：{{energyDisplay}}/100</text>
    <view class="energy-bar-bg">
      <view class="energy-bar-fill" style="{{'width:' + energyPercentage + '%;'}}"></view>
      <!-- 激光效果 -->
      <view class="energy-bar-glow" style="{{'left:' + energyPercentage + '%;'}}"></view>
      <!-- 显示+X的动画，位置在能量条上方 -->
      <view
        wx:if="{{showEnergyIncrease}}"
        class="energy-increase-text"
        style="{{'left:' + energyPercentage + '%;'}}"
      >
        +{{energyIncrease}}
      </view>
    </view>
    <image class="info-icon" src="/assets/question_mark.png" bindtap="showEnergyInfo" />
  </view>

  <wheel
    id="wheelComponent"
    prizes="{{prizes}}"
    points="{{points}}"
    propCount="{{propCount}}"
    bind:consumePoints="consumePoints"
    bind:addPoints="addPoints"
    bind:updateEnergy="updateEnergy"
    bind:spinFinished="updateSpinCount"
    bind:updateProp="updateProp"
    bind:updatePrizes="updatePrizes"
    bind:prizeConfirmed="onPrizeConfirmed"
  />
</view>
