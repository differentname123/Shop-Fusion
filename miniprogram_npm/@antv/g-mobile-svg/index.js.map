{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nvar tslib = require('tslib');\nvar gLite = require('@antv/g-lite');\nvar DragDropEvent = require('@antv/g-plugin-dragndrop');\nvar MobileInteraction = require('@antv/g-plugin-mobile-interaction');\nvar SVGPicker = require('@antv/g-plugin-svg-picker');\nvar SVGRenderer = require('@antv/g-plugin-svg-renderer');\nvar GesturePlugin = require('@antv/g-plugin-gesture');\nvar util = require('@antv/util');\n\nfunction _interopNamespaceDefault(e) {\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () { return e[k]; }\n                });\n            }\n        });\n    }\n    n.default = e;\n    return Object.freeze(n);\n}\n\nvar DragDropEvent__namespace = /*#__PURE__*/_interopNamespaceDefault(DragDropEvent);\nvar MobileInteraction__namespace = /*#__PURE__*/_interopNamespaceDefault(MobileInteraction);\nvar SVGPicker__namespace = /*#__PURE__*/_interopNamespaceDefault(SVGPicker);\nvar SVGRenderer__namespace = /*#__PURE__*/_interopNamespaceDefault(SVGRenderer);\nvar GesturePlugin__namespace = /*#__PURE__*/_interopNamespaceDefault(GesturePlugin);\n\nvar SVGContextService = /** @class */ (function () {\n    function SVGContextService(context) {\n        this.canvasConfig = context.config;\n    }\n    SVGContextService.prototype.init = function () {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var _a, container, doc, $namespace, dpr;\n            return tslib.__generator(this, function (_b) {\n                _a = this.canvasConfig, container = _a.container, doc = _a.document;\n                // create container\n                this.$container = util.isString(container) ? (doc || document).getElementById(container) : container;\n                if (this.$container) {\n                    if (!this.$container.style.position) {\n                        this.$container.style.position = 'relative';\n                    }\n                    $namespace = SVGRenderer.createSVGElement('svg', doc);\n                    $namespace.setAttribute('width', \"\".concat(this.canvasConfig.width));\n                    $namespace.setAttribute('height', \"\".concat(this.canvasConfig.height));\n                    this.$container.appendChild($namespace);\n                    this.$namespace = $namespace;\n                }\n                dpr = window.devicePixelRatio || 1;\n                dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n                this.dpr = dpr;\n                return [2 /*return*/];\n            });\n        });\n    };\n    // @ts-ignore\n    SVGContextService.prototype.getDomElement = function () {\n        return this.$namespace;\n    };\n    SVGContextService.prototype.getContext = function () {\n        return this.$namespace;\n    };\n    SVGContextService.prototype.getDPR = function () {\n        return this.dpr;\n    };\n    SVGContextService.prototype.getBoundingClientRect = function () {\n        var _a;\n        return (_a = this.$namespace) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect();\n    };\n    SVGContextService.prototype.destroy = function () {\n        // destroy context\n        if (this.$container && this.$namespace && this.$namespace.parentNode) {\n            this.$container.removeChild(this.$namespace);\n        }\n    };\n    SVGContextService.prototype.resize = function (width, height) {\n        if (this.$namespace) {\n            this.$namespace.setAttribute('width', \"\".concat(width));\n            this.$namespace.setAttribute('height', \"\".concat(height));\n        }\n    };\n    SVGContextService.prototype.applyCursorStyle = function (cursor) {\n        if (this.$container) {\n            this.$container.style.cursor = cursor;\n        }\n    };\n    SVGContextService.prototype.toDataURL = function (options) {\n        return tslib.__awaiter(this, void 0, void 0, function () {\n            var cloneNode, svgDocType, svgDoc;\n            return tslib.__generator(this, function (_a) {\n                cloneNode = this.$namespace.cloneNode(true);\n                svgDocType = document.implementation.createDocumentType('svg', '-//W3C//DTD SVG 1.1//EN', 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd');\n                svgDoc = document.implementation.createDocument('http://www.w3.org/2000/svg', 'svg', svgDocType);\n                svgDoc.replaceChild(cloneNode, svgDoc.documentElement);\n                return [2 /*return*/, \"data:image/svg+xml;charset=utf8,\".concat(encodeURIComponent(new XMLSerializer().serializeToString(svgDoc)))];\n            });\n        });\n    };\n    return SVGContextService;\n}());\n\nvar ContextRegisterPlugin = /** @class */ (function (_super) {\n    tslib.__extends(ContextRegisterPlugin, _super);\n    function ContextRegisterPlugin() {\n        var _this = _super.apply(this, tslib.__spreadArray([], tslib.__read(arguments), false)) || this;\n        _this.name = 'mobile-svg-context-register';\n        return _this;\n    }\n    ContextRegisterPlugin.prototype.init = function () {\n        // @ts-ignore\n        this.context.ContextService = SVGContextService;\n    };\n    ContextRegisterPlugin.prototype.destroy = function () {\n        delete this.context.ContextService;\n    };\n    return ContextRegisterPlugin;\n}(gLite.AbstractRendererPlugin));\n\nvar Renderer = /** @class */ (function (_super) {\n    tslib.__extends(Renderer, _super);\n    function Renderer(config) {\n        var _this = _super.call(this, config) || this;\n        _this.registerPlugin(new ContextRegisterPlugin());\n        _this.registerPlugin(new SVGRenderer__namespace.Plugin());\n        _this.registerPlugin(new MobileInteraction__namespace.Plugin());\n        _this.registerPlugin(new SVGPicker__namespace.Plugin());\n        _this.registerPlugin(new DragDropEvent__namespace.Plugin({\n            isDocumentDraggable: util.isNil(config === null || config === void 0 ? void 0 : config.isDocumentDraggable)\n                ? true\n                : config.isDocumentDraggable,\n            isDocumentDroppable: util.isNil(config === null || config === void 0 ? void 0 : config.isDocumentDroppable)\n                ? true\n                : config.isDocumentDroppable,\n            dragstartDistanceThreshold: util.isNil(config === null || config === void 0 ? void 0 : config.dragstartDistanceThreshold)\n                ? 10\n                : config.dragstartDistanceThreshold,\n            dragstartTimeThreshold: util.isNil(config === null || config === void 0 ? void 0 : config.dragstartTimeThreshold)\n                ? 50\n                : config.dragstartTimeThreshold,\n        }));\n        _this.registerPlugin(new GesturePlugin__namespace.Plugin({\n            isDocumentGestureEnabled: true,\n        }));\n        return _this;\n    }\n    return Renderer;\n}(gLite.AbstractRenderer));\n\nexports.MobileInteraction = MobileInteraction__namespace;\nexports.SVGPicker = SVGPicker__namespace;\nexports.SVGRenderer = SVGRenderer__namespace;\nexports.Renderer = Renderer;\n//# sourceMappingURL=index.js.map\n"]}